/* guitarInstrument.css */
/* this wrapper is slightly redundant but we set the background color here */
.outer-wrapper {
  background: #04273C;
    flex-grow: 1;
  display: flex;
  flex-direction: column;
  align-items: center; /* Horizontally centers all direct children */
  padding: calc(var(--spacing-unit) * 2);
  gap: calc(var(--spacing-unit) * 1.5);
  width: 100%;
  max-width: 1200px;
}
/* General Styles - guitar wrapper is the same size as its parent but it doesn't have the background color */
.guitar-wrapper {
  display: flex;
  align-items: center;
  gap: 15px;
  justify-content: center;
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
}

/* Fretboard Styles */
.guitar-fretboard {
  position: relative;
  width: 1000px;
  height: 200px;
  background: linear-gradient(to bottom, #8B4513 0%, #D2691E 50%, #8B4513 100%);
  border-radius: 8px;
  box-shadow: inset 0 2px 10px rgba(0,0,0,0.3);
  user-select: none;
  flex-shrink: 0;
  overflow: hidden; /* This will contain the strings and frets */
}

/* String Containers */
.guitar-string-container {
  position: absolute;
  left: 0;
  width: 100%;
  height: calc(200px / 6);
  display: flex;
  align-items: center;
  border-bottom: 1px solid rgba(0,0,0,0.2);
}

.guitar-string-container.string-1 { top: calc(200px * 5 / 6); }
.guitar-string-container.string-2 { top: calc(200px * 4 / 6); }
.guitar-string-container.string-3 { top: calc(200px * 3 / 6); }
.guitar-string-container.string-4 { top: calc(200px * 2 / 6); }
.guitar-string-container.string-5 { top: calc(200px * 1 / 6); }
.guitar-string-container.string-6 { top: calc(200px * 0 / 6); border-top: 1px solid rgba(0,0,0,0.2); }


/* Strings */
.guitar-string-line {
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 100%;
  background: linear-gradient(to bottom, #C0C0C0, #808080, #C0C0C0);
  z-index: 1;
}

.string-line-6 { height: 4px; }
.string-line-5 { height: 3.5px; }
.string-line-4 { height: 3px; }
.string-line-3 { height: 2.5px; }
.string-line-2 { height: 2px; }
.string-line-1 { height: 1.5px; }


/* Fret Positions */
.fret-position {
  position: absolute;
  top: 0;
  height: 100%;
  z-index: 2;
  cursor: pointer;
  left: var(--fret-left-position);
  width: var(--fret-width);
  transition: background-color 0.1s ease;
}

.fret-position.fret-nut {
  background: linear-gradient(to bottom, #f5f5dc, #e0e0b8);
  border-right: 4px solid #b39b7d;
  box-shadow: 2px 0 5px rgba(0,0,0,0.2);
}

.fret-position.fret {
  border-left: 1px solid rgba(0,0,0,0.3);
}

.fret-position.hover {
  background-color: rgba(255,255,255,0.1);
}

/* Finger Positions */
.finger-position {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  background: radial-gradient(circle, #444, #000);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  z-index: 4;
  box-shadow: 0 2px 4px rgba(0,0,0,0.5);
  cursor: pointer;
  border: 2px solid rgba(255,255,255,0.3);
}

/* Strum Area */
.strum-area {
  position: absolute;
  right: 0;
  top: 0;
  width: 5.33%;
  height: 200px;
  background: rgba(255, 255, 255, 0.05);
  border-left: 1px solid rgba(0,0,0,0.1);
  cursor: pointer;
  z-index: 5;
  transition: background-color 0.2s ease;
  border-top-right-radius: 8px;
  border-bottom-right-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.strum-area.hover {
  background-color: rgba(255, 255, 255, 0.15);
}

.strum-area span {
  color: rgba(255, 255, 255, 0.4);
  font-size: 12px;
  font-weight: bold;
  text-align: center;
  pointer-events: none;
  writing-mode: vertical-rl;
  text-orientation: mixed;
}

/* String Buttons */
.string-labels-container {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 100px;
  align-items: flex-start;
}

.string-button {
  width: 90px;
  height: auto;
  padding: 8px 12px;
  margin: 2px 0;
  background: linear-gradient(to right, #f8f9fa, #e9ecef);
  border: 1px solid #dee2e6;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
  color: #495057;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: center;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}



@keyframes vibrate {
    0%   { 
        transform: translateY(0px) scaleY(1); 
        filter: blur(0px) brightness(1.2);
        box-shadow: 0 0 0px rgba(255, 255, 255, 0);
    }
    2%   { 
        transform: translateY(-4px) scaleY(0.95); 
        filter: blur(0.5px) brightness(1.4);
        box-shadow: 0 0 8px rgba(255, 255, 255, 0.6);
    }
    5%   { 
        transform: translateY(3px) scaleY(1.05); 
        filter: blur(0.3px) brightness(1.3);
    }
    8%   { 
        transform: translateY(-3px) scaleY(0.97); 
        filter: blur(0.4px) brightness(1.2);
    }
    12%  { 
        transform: translateY(2px) scaleY(1.03); 
        filter: blur(0.2px) brightness(1.1);
    }
    16%  { 
        transform: translateY(-2px) scaleY(0.98); 
        filter: blur(0.3px) brightness(1.1);
    }
    22%  { 
        transform: translateY(1.5px) scaleY(1.02); 
        filter: blur(0.1px) brightness(1.05);
    }
    28%  { 
        transform: translateY(-1.5px) scaleY(0.99); 
        filter: blur(0.2px) brightness(1.05);
    }
    35%  { 
        transform: translateY(1px) scaleY(1.01); 
        filter: blur(0.1px) brightness(1.02);
    }
    45%  { 
        transform: translateY(-1px) scaleY(0.995); 
        filter: blur(0.1px) brightness(1.02);
    }
    55%  { 
        transform: translateY(0.5px) scaleY(1.005); 
        filter: blur(0px) brightness(1.01);
    }
    70%  { 
        transform: translateY(-0.5px) scaleY(0.998); 
        filter: blur(0px) brightness(1.01);
    }
    85%  { 
        transform: translateY(0.2px) scaleY(1.002); 
        filter: blur(0px) brightness(1.005);
    }
    100% { 
        transform: translateY(0px) scaleY(1); 
        filter: blur(0px) brightness(1);
        box-shadow: 0 0 0px rgba(255, 255, 255, 0);
    }
}

/* Alternative wave-like vibration for extra juice */
@keyframes vibrateWave {
    0%   { 
        transform: translateY(0px) rotateZ(0deg); 
        filter: blur(0px) brightness(1.2);
        box-shadow: 0 0 0px rgba(255, 255, 255, 0);
    }
    1%   { 
        transform: translateY(-3px) rotateZ(0.5deg); 
        filter: blur(0.5px) brightness(1.5);
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
    }
    3%   { transform: translateY(2px) rotateZ(-0.3deg); filter: blur(0.3px) brightness(1.3); }
    5%   { transform: translateY(-2px) rotateZ(0.2deg); filter: blur(0.4px) brightness(1.2); }
    8%   { transform: translateY(1.5px) rotateZ(-0.15deg); filter: blur(0.2px) brightness(1.1); }
    12%  { transform: translateY(-1.5px) rotateZ(0.1deg); filter: blur(0.3px) brightness(1.1); }
    18%  { transform: translateY(1px) rotateZ(-0.08deg); filter: blur(0.1px) brightness(1.05); }
    25%  { transform: translateY(-1px) rotateZ(0.05deg); filter: blur(0.2px) brightness(1.05); }
    35%  { transform: translateY(0.5px) rotateZ(-0.03deg); filter: blur(0.1px) brightness(1.02); }
    50%  { transform: translateY(-0.5px) rotateZ(0.02deg); filter: blur(0.1px) brightness(1.02); }
    65%  { transform: translateY(0.3px) rotateZ(-0.01deg); filter: blur(0px) brightness(1.01); }
    80%  { transform: translateY(-0.2px) rotateZ(0.005deg); filter: blur(0px) brightness(1.01); }
    100% { 
        transform: translateY(0px) rotateZ(0deg); 
        filter: blur(0px) brightness(1);
        box-shadow: 0 0 0px rgba(255, 255, 255, 0);
    }
}


@keyframes vibrateJuicy {
    0%   { 
        transform: translateY(-50%) scaleY(1); 
        filter: blur(0px) brightness(1);
        box-shadow: 0 0 0px rgba(255, 255, 255, 0);
    }
    3%   { 
        transform: translateY(calc(-50% - 1.8px)) scaleY(0.92); 
        filter: blur(0.6px) brightness(1.4);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.9);
    }
    8%   { transform: translateY(calc(-50% + 1.5px)) scaleY(1.08); filter: blur(0.4px) brightness(1.25); }
    15%  { transform: translateY(calc(-50% - 1.2px)) scaleY(0.95); filter: blur(0.3px) brightness(1.15); }
    25%  { transform: translateY(calc(-50% + 1px)) scaleY(1.05); filter: blur(0.25px) brightness(1.1); }
    35%  { transform: translateY(calc(-50% - 0.8px)) scaleY(0.97); filter: blur(0.2px) brightness(1.08); }
    45%  { transform: translateY(calc(-50% + 0.6px)) scaleY(1.03); filter: blur(0.15px) brightness(1.06); }
    55%  { transform: translateY(calc(-50% - 0.5px)) scaleY(0.98); filter: blur(0.1px) brightness(1.04); }
    65%  { transform: translateY(calc(-50% + 0.3px)) scaleY(1.02); filter: blur(0.08px) brightness(1.03); }
    75%  { transform: translateY(calc(-50% - 0.2px)) scaleY(0.99); filter: blur(0.05px) brightness(1.02); }
    85%  { transform: translateY(calc(-50% + 0.15px)) scaleY(1.01); filter: blur(0.03px) brightness(1.015); }
    92%  { transform: translateY(calc(-50% - 0.1px)) scaleY(0.995); filter: blur(0.02px) brightness(1.01); }
    96%  { transform: translateY(calc(-50% + 0.05px)) scaleY(1.005); filter: blur(0.01px) brightness(1.005); }
    98%  { transform: translateY(calc(-50% - 0.03px)) scaleY(0.998); filter: blur(0.005px) brightness(1.002); }
    100% { 
        transform: translateY(-50%) scaleY(1);  /* <-- Matches the natural state! */
        filter: blur(0px) brightness(1);
        box-shadow: 0 0 0px rgba(255, 255, 255, 0);
    }
}

/* Use a more natural easing that mimics string decay */
.guitar-string-container.active .guitar-string-line {
    animation: vibrateJuicy 1.4s cubic-bezier(0, 0, 0.58, 1);
}

/* Smoother container glow */
@keyframes stringGlow {
    0%   { box-shadow: inset 0 0 0px rgba(255, 255, 255, 0); }
    5%   { box-shadow: inset 0 0 25px rgba(255, 255, 255, 0.2); }
    50%  { box-shadow: inset 0 0 15px rgba(255, 255, 255, 0.1); }
    85%  { box-shadow: inset 0 0 8px rgba(255, 255, 255, 0.05); }
    100% { box-shadow: inset 0 0 0px rgba(255, 255, 255, 0); }
}

.guitar-string-container.active {
    animation: stringGlow 1.4s cubic-bezier(0.25, 0.1, 0.25, 1);
}

.chord-diagrams-wrapper {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
  
}

.chord-diagram-container {
  border: 1px solid #ddd;
  border-radius: 8px;
  background: white;
}

.string-button-container {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.string-button.muted {
  opacity: 0.5;
  text-decoration: line-through;
  color: #666;
}

.mute-button {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  border: 1px solid #ccc;
  background: #fff;
  font-size: 12px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.2s;
}

.mute-button:hover {
  background: #f0f0f0;
  border-color: #999;
}

.mute-button.active {
  background: #d32f2f;
  color: white;
  border-color: #d32f2f;
}

.guitar-string.muted {
  opacity: 0.3;
  filter: grayscale(100%);
}